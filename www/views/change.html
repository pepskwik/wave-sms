<ion-view view-title="Change Password">
  <ion-content class="padding-top">
    <div class="text-center padding-top">
      <i class="icon ion-ios-shuffle larger positive"></i>
    </div>
    <form name="changeForm" novalidate ng-submit="changeForm.$valid && vm.changePassword(vm.user)"
    ng-class="{ 'has-error' : changeForm.txtoldpassword.$invalid && changeForm.$submitted }">
    <div class="list list-inset">
      <label class="item item-input" ng-class="{ 'has-error' : changeForm.txtoldpassword.$invalid  && changeForm.$submitted, 'no-error' : changeForm.txtoldpassword.$valid }">
        <input name="txtoldpassword" type="password" placeholder="Current password"
        ng-model="vm.user.oldPassword"
        required>
      </label>
      <div class="form-errors" ng-messages="changeForm.txtoldpassword.$error" ng-if="changeForm.$submitted">
        <div class="form-error" ng-message="required">This field is required.</div>
      </div>
      <label class="item item-input" ng-class="{ 'has-error' : changeForm.txtnewpassword.$invalid  && changeForm.$submitted, 'no-error' : changeForm.txtnewpassword.$valid }">
        <input name="txtnewpassword" type="password" placeholder="New password"
        ng-model="vm.user.newPassword"
        ng-minlength="6"
        required>
      </label>
      <div class="form-errors" ng-messages="changeForm.txtnewpassword.$error" ng-if="changeForm.$submitted">
        <div class="form-error" ng-message="required">This field is required.</div>
        <div class="form-error" ng-message="minlength">This field is must be at least 6 characters.</div>
      </div>
      <label class="item item-input" ng-class="{ 'has-error' : changeForm.txtconfirmpassword.$invalid  && changeForm.$submitted, 'no-error' : changeForm.txtconfirmpassword.$valid }">
        <input name="txtconfirmpassword" type="password" placeholder="Confirm new password"
        ng-model="vm.confirmPassword"
        match="vm.user.newPassword"
        required>
      </label>
      <div class="form-errors" ng-messages="changeForm.txtconfirmpassword.$error" ng-if="changeForm.$submitted">
        <div class="form-error" ng-message="required">This field is required.</div>
        <div class="form-error" ng-message="match">Passwords do not match.</div>
      </div>
    </div>
    <div class="padding">
      <input type="submit" value="Change password" class="button button-block button-positive"/>
    </div>
  </form>
  </ion-content>
</ion-view>
